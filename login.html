<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>A Pen by Ivan</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/3.4.0/introjs.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.1.2/tailwind.min.css"
    />

    <style>
      /*
Use CSS from 
  https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.1.1/tailwind.min.css
*/

      /* @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@500&display=swap'); */

      * {
        /*font-family: 'Rubik', sans-serif;*/
        color: #333333;
        font-size: 25px;
        font-family: Comic Sans MS;
      }

      .container {
        position: relative;
      }

      .overlay,
      .bg {
        height: 100%;
        width: 100%;
        position: absolute;
      }

      body,
      html {
        height: 100%;
      }

      body {
        background: #fafafa;
      }
    </style>

    <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css"
    />
  </head>

  <body translate="no">
    <div id="mainApp" class="h-screen">
      <!-- Content Generated by JS -->
    </div>

    <!-- React -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-storage.js"></script>

    <!-- RxJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/7.1.0/rxjs.umd.min.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyDBORguQ4fUIgHevka4CiC-M44DM5DoBLQ",
        authDomain: "gt-uoa.firebaseapp.com",
        projectId: "gt-uoa",
        storageBucket: "gt-uoa.appspot.com",
        messagingSenderId: "990838040454",
        appId: "1:990838040454:web:25634085dc0b6184696e07"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const ui = new firebaseui.auth.AuthUI(firebase.auth());
    </script>

    <script id="rendered-js" type="text/babel">
      function App(props) {
        return <div id="login-container"></div>;
      }

      ReactDOM.render(<App />, document.getElementById("mainApp"));

      firebase
        .auth()
        .setPersistence(firebase.auth.Auth.Persistence.LOCAL)
        .then(() => {
          ui.start("#login-container", {
            signInOptions: [firebase.auth.EmailAuthProvider.PROVIDER_ID],
            callbacks: {
              signInSuccessWithAuthResult: function (authResult, redirectUrl) {
                console.log(authResult);
                const userId = authResult.user.uid;
                // Manually redirect.
                window.location.assign(`/`);
                // Do not automatically redirect.
                return false;
              }
            }
          });
        });
    </script>
  </body>
</html>
