(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{1184:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(5893),i=t(7839),s=t(7922),o=(t(6690),t(5913)),a=t.n(o);function c(e){var n=e.signInSuccessUrl,t=(0,i.hI)(n||""),o={signInFlow:"popup",signInSuccessUrl:n?t:void 0,signInOptions:[s.Z.auth.EmailAuthProvider.PROVIDER_ID]};return(0,r.jsx)(a(),{uiConfig:o,firebaseAuth:s.Z.auth()})}},1920:function(e,n,t){"use strict";t.d(n,{Z:function(){return he}});var r,i=t(5893),s=t(7329),o=t(6156),a=t(4699),c=t(1664),u=t(9008),l=t(3006),d=t(7294),f=t(1184),p=t(6716),h=t(2401),v=t(1751),m=t(4975),g=t(8557),_=t(7839),b={en:{hint_button:"Hint",answer_button:"Answer",next_button:"Next Question",instruction_spelling_audio:"Spell the word you heard.",instruction_mc_audio:"Select the word you heard.",instruction_mc_abbreviation:"Select the correct abbreviation.",instruction_spelling_translate:'Write "[]" in English.',instruction_mc_translate:"Translate the underlined word.",instruction_speech:'Read the word "[]".',recording_button:"Press to Speak",record_retry_button:"Please try again",advice_primary:["Excellent!","Well Done!","Perfect!","Good!","Great!","Fabulous!","Marvelous!","Superb!","Amazing!","Wonderful!","Bravo!"],advice_secondary:[""]},jp:{hint_button:"\u30d2\u30f3\u30c8",answer_button:"\u6b21\u3078",next_button:"\u6b21\u3078",instruction_spelling_audio:"\u805e\u3053\u3048\u305f\u5358\u8a9e\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044",instruction_mc_audio:"\u805e\u3053\u3048\u305f\u5358\u8a9e\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044",instruction_mc_abbreviation:"\u6b63\u3057\u3044\u7565\u8a9e\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044",instruction_spelling_translate:"\u300c[]\u300d\u3092\u82f1\u8a9e\u3067\u66f8\u3044\u3066\u304f\u3060\u3055\u3044",instruction_mc_translate:"\u4e0b\u7dda\u4ed8\u304d\u6587\u5b57\u3092\u7ffb\u8a33\u3057\u3066\u304f\u3060\u3055\u3044",instruction_speech:"\u300c[]\u300d\u3092\u82f1\u8a9e\u3067\u8aad\u307f\u4e0a\u3052\u3066\u304f\u3060\u3055\u3044",recording_button:"\u62bc\u3057\u3066\u8a71\u3059",record_retry_button:"\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044",advice_primary:["\u7d20\u6674\u3089\u3057\u3044\uff01","\u3088\u304f\u3084\u3063\u305f\uff01","\u7d20\u6575\uff01","\u3059\u3054\u3044\u306d\uff01","\u3088\u304f\u3067\u304d\u305f\uff01","\u3044\u3044\u611f\u3058\uff01","\u3044\u3044\u306d\uff01","\u6b63\u89e3\uff01","\u9811\u5f35\u3063\u305f\u306d\uff01"],advice_secondary:[]}};function x(e){var n=e.audio_url,t=(0,d.useMemo)((function(){return new Audio(n)}),[n]),r=(0,d.useCallback)((function(){t.play().catch((function(e){if("NotAllowedError"!==e.name)throw e;console.log("This system does not allow audio to be auto-played.")}))}),[t]);return(0,d.useEffect)((function(){r()}),[r]),(0,i.jsx)("div",{className:"question_area audio",children:n?(0,i.jsx)("div",{className:"playbutton",onClick:function(e){return r()},children:(0,i.jsx)(l.o1,{})}):(0,i.jsx)("h3",{style:{color:"red"},children:"Error: Audio not found. "})})}!function(e){e[e.NOT_ANSWERED_YET=-1]="NOT_ANSWERED_YET",e[e.ANSWER_INCORRECT=0]="ANSWER_INCORRECT",e[e.ANSWER_CORRECT=1]="ANSWER_CORRECT"}(r||(r={}));var j=t(850),w=t.n(j);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e,n){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw s}}}}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function C(e){var n=(0,d.useRef)(),t=(0,d.useRef)(),r=(0,d.useRef)(1),s=(0,d.useCallback)((function(e){if(t.current){var n=Math.max(Math.min(r.current*e/t.current.clientWidth,1),.1);r.current!=n&&(r.current=n,t.current.style.fontSize=r.current+"em")}}),[]);return(0,d.useEffect)((function(){var e=n.current,t=new ResizeObserver((function(e){var n,t=S(e);try{for(t.s();!(n=t.n()).done;){var r=n.value;r.contentBoxSize&&r.contentBoxSize[0]?s(r.contentBoxSize[0].inlineSize):r.contentBoxSize?s(r.contentBoxSize.inlineSize):s(r.contentRect.width)}}catch(i){t.e(i)}finally{t.f()}}));return t.observe(e),function(){t.unobserve(e),t.disconnect()}}),[s]),(0,d.useEffect)((function(){s(n.current.clientWidth)}),[s,e.children]),(0,i.jsx)("button",E(E({},e),{},{children:(0,i.jsx)("span",{className:w().outterSpan,ref:n,children:(0,i.jsx)("span",{className:w().innerSpan,ref:t,children:e.children})})}))}function A(e){var n=e.options,t=e.selected,s=e.onChange,o=e.answerState;return(0,i.jsx)("div",{className:"answer_area options",children:n.map((function(e,n){return(0,i.jsx)(C,{disabled:o!==r.NOT_ANSWERED_YET&&t!==e,className:"option "+(t===e?o===r.ANSWER_CORRECT?"correct":o===r.ANSWER_INCORRECT?"incorrect":"selected":""),onClick:function(n){return s(e)},children:e},n)}))})}function R(e,n){return e===n}function T(e){var n=e.lang;return(0,i.jsx)("div",{className:"instruction",children:b[n].instruction_mc_audio})}var O={UI:function(e){var n=e.lang,t=e.challenge,r=e.currentAnswer,s=e.onAnswerChange,o=e.answerState;return(0,i.jsxs)("div",{className:"session quizStyles question_container",children:[(0,i.jsx)(T,{lang:n}),(0,i.jsx)(x,{audio_url:t.audio_url}),(0,i.jsx)(A,{options:t.options,selected:r,onChange:s,answerState:o})]})},checkAnswer:R};function Z(e){var n=e.question,t=e.primary,r=e.secondary,s=e.image_url,o=(0,d.useMemo)((function(){return t?(0,i.jsx)(_.ly,{sentence:t,inside:n}):(0,i.jsx)(i.Fragment,{})}),[t,n]),a=(0,d.useMemo)((function(){return r?(0,i.jsx)(_.ly,{sentence:r,inside:"\u3000\u3000\u3000"}):(0,i.jsx)(i.Fragment,{})}),[r]);return(0,i.jsxs)("div",{className:"question_area ".concat(r?"multilingual":""," ").concat(s?"image_container":""),children:[t?(0,i.jsx)("div",{className:"primary",children:o}):null,r?(0,i.jsx)("div",{className:"secondary",children:a}):null,s?(0,i.jsx)("img",{src:s,alt:n}):null]})}function P(e){var n=e.lang;return(0,i.jsx)("div",{className:"instruction",children:b[n].instruction_mc_translate})}var W={UI:function(e){var n,t,r=e.lang,s=e.challenge,o=e.currentAnswer,a=e.onAnswerChange,c=e.answerState;return(0,i.jsxs)("div",{className:"session quizStyles question_container",children:[(0,i.jsx)(P,{lang:r}),(0,i.jsx)(Z,{question:s.question,primary:null===(n=s.sentence)||void 0===n?void 0:n.japanese,secondary:null===(t=s.sentence)||void 0===t?void 0:t.english,image_url:s.image_url}),(0,i.jsx)(A,{options:s.options,selected:o,onChange:a,answerState:c})]})},checkAnswer:R};function k(e){var n=e.value,t=e.onChange,s=e.answerState;return(0,i.jsx)("div",{className:"answer_area input_container",children:(0,i.jsx)("input",{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onChange:function(e){return t(e.target.value)},className:"input "+(n.length>0?s===r.ANSWER_CORRECT?"correct":s===r.ANSWER_INCORRECT?"incorrect":"answered":""),value:n})})}function q(e,n){return e.toLowerCase()===n.toLowerCase()}function U(e){var n=e.lang;return(0,i.jsx)("div",{className:"instruction",children:b[n].instruction_spelling_audio})}var M={UI:function(e){var n=e.lang,t=e.challenge,r=e.currentAnswer,s=e.onAnswerChange,o=e.answerState;return(0,i.jsxs)("div",{className:"session quizStyles question_container",children:[(0,i.jsx)(U,{lang:n}),(0,i.jsx)(x,{audio_url:t.audio_url}),(0,i.jsx)(k,{value:r,onChange:s,answerState:o})]})},checkAnswer:q};function D(e){var n=e.lang,t=e.question;return(0,i.jsx)("div",{className:"instruction",children:(0,_.A2)(b[n].instruction_spelling_translate,t)})}var I={UI:function(e){var n,t,r=e.lang,s=e.challenge,o=e.currentAnswer,a=e.onAnswerChange,c=e.answerState;return(0,i.jsxs)("div",{className:"session quizStyles question_container",children:[(0,i.jsx)(D,{lang:r,question:s.question}),(0,i.jsx)(Z,{question:s.question,primary:null===(n=s.sentence)||void 0===n?void 0:n.japanese,secondary:null===(t=s.sentence)||void 0===t?void 0:t.english,image_url:s.image_url}),(0,i.jsx)(k,{value:o,onChange:a,answerState:c})]})},checkAnswer:q};function z(e){var n=e.word,t=e.audio_url,r=e.listeningToSpeech,s=e.onPlayingStateChange,o=(0,d.useState)(!1),a=o[0],c=o[1],u=(0,d.useMemo)((function(){var e=new Audio(t);return e.addEventListener("ended",(function(e){c(!1)})),e}),[t]),f=(0,d.useCallback)((function(){u.play().catch((function(e){if("NotAllowedError"!==e.name)throw e;console.log("This system does not allow audio to be auto-played.")})).then((function(){c(!0)}))}),[u]);return(0,d.useEffect)((function(){s(a)}),[a,s]),(0,d.useEffect)((function(){r&&(u.pause(),u.currentTime=0)}),[r,u]),(0,i.jsx)("div",{className:"question_area speech",children:(0,i.jsxs)("div",{className:"primary",children:[(0,i.jsx)("div",{className:"playbutton",onClick:function(e){return f()},children:(0,i.jsx)(l.o1,{})}),(0,i.jsx)("span",{children:n})]})})}var F=t(2515),Y=(0,t(2996).createSpeechlySpeechRecognition)("95d35835-5527-45aa-ba1a-0c03ad6bc160");function L(e){var n=e.lang,t=e.answer,s=e.onChange,o=e.onNext,a=e.answerState,c=e.audioPlaying,u=e.onListeningStateChange,f=(0,F.x6)(),p=f.transcript,h=f.listening,v=f.resetTranscript,m=f.browserSupportsSpeechRecognition,g=(0,d.useState)(!1),_=g[0],x=g[1];(0,d.useEffect)((function(){var e=p.split(/[^a-zA-Z0-9]+/).filter((function(e){return e.length>0}));e.some((function(e){return(null===e||void 0===e?void 0:e.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())}))?(v(),x(!1),F.ZP.stopListening(),s(t)):e.length>0&&x(!0)}),[t,s,v,p]),(0,d.useEffect)((function(){a===r.NOT_ANSWERED_YET&&x(!1)}),[a]),(0,d.useEffect)((function(){h||o()}),[o,h]);var j=(0,d.useCallback)((function(e){c||a===r.NOT_ANSWERED_YET&&(h?F.ZP.stopListening():F.ZP.startListening({continuous:!1}))}),[a,c,h]);return(0,d.useEffect)((function(){u(h)}),[h,u]),(0,d.useEffect)((function(){c&&F.ZP.stopListening()}),[c]),(0,d.useEffect)((function(){a!==r.NOT_ANSWERED_YET&&F.ZP.stopListening()}),[a]),(0,i.jsxs)("div",{className:"answer_area speech",children:[(0,i.jsxs)("button",{className:"\n          ".concat(h?"recording":""," \n          ").concat(a===r.ANSWER_CORRECT?"correct":"","\n          ").concat(a===r.ANSWER_INCORRECT?"incorrect":"","\n        "),onClick:j,disabled:!m||c,onFocus:function(e){e.target.blur()},children:[(0,i.jsx)(l.ZO,{width:"16",height:"24"}),(0,i.jsx)("span",{children:_?b[n].record_retry_button:b[n].recording_button})]}),m?"":(0,i.jsx)("div",{style:{color:"red",marginTop:"1rem"},children:"This browser does not support speech. Please use Chrome or Safari with Internet coneection."})]})}function B(e){var n=e.lang,t=e.question,r=e.question_en;return(0,i.jsx)("div",{className:"instruction",children:"en"===n?(0,_.A2)(b.en.instruction_speech,r):(0,_.A2)(b.jp.instruction_speech,t)})}F.ZP.applyPolyfill(Y);var V={UI:function(e){var n=e.lang,t=e.challenge,r=e.onAnswerChange,s=e.onNext,o=e.answerState,a=(0,d.useState)(!1),c=a[0],u=a[1],l=(0,d.useState)(!1),f=l[0],p=l[1],h=(0,d.useMemo)((function(){var e=t.answer.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)}),[t.answer]);return(0,i.jsxs)("div",{className:"session quizStyles question_container",children:[(0,i.jsx)(B,{lang:n,question:t.question,question_en:t.answer}),(0,i.jsx)(z,{word:h,audio_url:t.audio_url,listeningToSpeech:f,onPlayingStateChange:u}),(0,i.jsx)(L,{lang:n,answer:t.answer,onNext:s,onChange:r,answerState:o,audioPlaying:c,onListeningStateChange:p})]})},checkAnswer:function(e,n){return e.toLowerCase()===n.toLowerCase()},checkAnswerUponUpdate:!0};function X(e){var n=e.question;return(0,i.jsx)("div",{className:"question_area abbreviation",children:(0,i.jsx)("div",{className:"primary",children:n})})}function Q(e){var n=e.lang;return(0,i.jsx)("div",{className:"instruction",children:b[n].instruction_mc_abbreviation})}var $={UI:function(e){var n=e.lang,t=e.challenge,r=e.currentAnswer,s=e.onAnswerChange,o=e.answerState;return(0,i.jsxs)("div",{className:"session quizStyles question_container",children:[(0,i.jsx)(Q,{lang:n}),(0,i.jsx)(X,{question:t.question}),(0,i.jsx)(A,{options:t.options,selected:r,onChange:s,answerState:o})]})},checkAnswer:R};function G(e,n){var t=e.challenge,s=(0,d.useState)(""),o=s[0],a=s[1],c=(0,d.useState)([]),u=(c[0],c[1],(0,d.useState)(r.NOT_ANSWERED_YET)),f=u[0],x=u[1],j=(0,d.useMemo)((function(){return"mc"===t.type?"translate"===(null===t||void 0===t?void 0:t.subtype)?W:"abbrv"===(null===t||void 0===t?void 0:t.subtype)?$:O:"spelling"===t.type?"translate"===(null===t||void 0===t?void 0:t.subtype)?I:M:V}),[null===t||void 0===t?void 0:t.subtype,t.type]),w=(0,_.hI)("/assets/sounds/correct_2.mp3"),y=(0,_.hI)("/assets/sounds/incorrect_2.mp3"),E=(0,_.Ye)(w,{volume:.1}),S=(0,_.Ye)(y,{volume:.1}),N=(0,d.useCallback)((function(){if(f===r.NOT_ANSWERED_YET){var n=j.checkAnswer(t.answer,o),i=n?r.ANSWER_CORRECT:r.ANSWER_INCORRECT;x(i),n?E.play():S.play(),n&&e.onCorrect()}}),[o,f,t.answer,E,S,j,e]),C=(0,d.useCallback)((function(){a(""),e.onNext(f===r.ANSWER_CORRECT),x(r.NOT_ANSWERED_YET)}),[f,e]),A=(0,d.useCallback)((function(){f===r.NOT_ANSWERED_YET?N():C()}),[f,N,C]),R=(0,d.useMemo)((function(){return new p.x}),[]);(0,d.useEffect)((function(){var e=(0,h.R)(document,"keyup").pipe((0,m.h)((function(e){return"Enter"===e.code}))),n=(0,v.T)(R,e).pipe((0,g.b)(50)).subscribe((function(e){f===r.NOT_ANSWERED_YET&&0===o.length||A()}));return function(){n.unsubscribe()}}),[o,o.length,f,R,t.answer,N,C,A]),(0,d.useEffect)((function(){j.checkAnswerUponUpdate&&f===r.NOT_ANSWERED_YET&&j.checkAnswer(t.answer,o)&&R.next()}),[o,f,R,t.answer,N,j]);var T=e.language,Z=(0,d.useMemo)((function(){return b[T]}),[T]);return(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)(j.UI,{lang:T,currentAnswer:o,challenge:t,onNext:function(){return R.next()},onAnswerChange:function(e){f===r.NOT_ANSWERED_YET&&a(e)},answerState:f}),(0,i.jsxs)("div",{className:"footer quizStyles",children:[(0,i.jsxs)("div",{className:"session",children:[(0,i.jsx)("div",{className:"flex-grow"}),(0,i.jsx)("button",{disabled:f===r.NOT_ANSWERED_YET&&0===o.length,onClick:function(e){return R.next()},children:Z.answer_button})]}),(0,i.jsx)("div",{className:"advice ".concat(f===r.NOT_ANSWERED_YET?"":"shown"," ").concat(f===r.ANSWER_INCORRECT?"incorrect":""),children:(0,i.jsxs)("div",{className:"session",children:[(0,i.jsx)("div",{className:"indicator",children:f===r.ANSWER_CORRECT?(0,i.jsx)(l.Ye,{}):(0,i.jsx)(l.aM,{})}),(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsx)("div",{className:"primary",children:f===r.ANSWER_CORRECT?Z.advice_primary[(0,_.XF)(Z.advice_primary.length)]:"\u6b63\u89e3\u4f8b\uff1a"}),(0,i.jsx)("div",{className:"secondary",children:f===r.ANSWER_CORRECT?Z.advice_primary[(0,_.XF)(Z.advice_primary.length)]:t.answer})]}),(0,i.jsx)("button",{onClick:function(e){return R.next()},children:(0,i.jsx)(l.e0,{})})]})})]})]})}var H=["Congratulations!","Well done!"];function J(e){var n=e.totalTime,t=e.bestTime,r=e.bestTimeUpdated,s=(0,d.useMemo)((function(){return H[(0,_.XF)(H.length)]}),[]),o=(0,_.hI)("/assets/sounds/finish.wav"),a=(0,_.Ye)(o,{volume:.1});(0,d.useEffect)((function(){a.play()}),[a]);var c=(0,d.useMemo)((function(){return!!n}),[n]),u=(0,d.useMemo)((function(){return!!t}),[t]),l=(0,d.useMemo)((function(){return(0,_.db)(n)}),[n]),f=(0,d.useMemo)((function(){return(0,_.db)(t)}),[t]);return(0,i.jsxs)("div",{className:"finishScreen session",children:[(0,i.jsx)("h2",{children:s}),(0,i.jsx)("div",{children:"Let\u2019s keep going!"}),(0,i.jsx)("div",{children:c?(0,i.jsxs)(i.Fragment,{children:["Time Elapsed: ",l.minutes>0?"".concat(l.minutes,"m"):""," ",l.seconds,"s"]}):(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{children:u?(0,i.jsxs)(i.Fragment,{children:["Your personal best time for this topic: ",f.minutes>0?"".concat(f.minutes,"m"):""," ",f.seconds,"s"]}):(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{children:null!==r&&r?(0,i.jsx)(i.Fragment,{children:"Congradulations of updating your personal best time!"}):(0,i.jsx)(i.Fragment,{})})]})}function K(){return(0,i.jsx)("div",{className:"px-40 lg:px-60 xl:px-80 text-center",children:(0,i.jsx)(l.Ho,{style:{width:"100%",maxWidth:"72px",display:"inline-block"}})})}var ee=t(2334),ne=t(3),te=t(5720),re=t(2303),ie=t(5196),se=t(7877),oe=t(9127),ae=t(5583),ce=t(2407),ue=t(7922),le=(t(6257),t(8251)),de=t(3062);function fe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function he(e){var n=e.topic,t=e.language,r=(0,d.useState)(0),h=r[0],v=r[1],g=(0,d.useState)(0),b=g[0],x=g[1],j=(0,d.useState)(0),w=j[0],y=j[1],E=(0,d.useState)([]),S=E[0],N=E[1],C=(0,d.useState)(!1),A=C[0],R=C[1],T=(0,d.useState)(!1),O=T[0],Z=T[1],P=(0,d.useMemo)((function(){return new p.x}),[]),W=(0,de.BF)(),k=(0,de.pV)(W),q=(0,d.useMemo)((function(){return new p.x}),[]),U=(0,d.useRef)(!0);(0,d.useEffect)((function(){A&&b===h&&P.next()}),[A,b,h,P]),(0,d.useEffect)((function(){var e=new ne.t(1),t=W.pipe((0,m.h)((function(e){return!!e}))).pipe((0,ie.P)()).pipe((0,se.z)((function(e){return ue.Z.firestore().collection("users").doc(e.uid).collection("finishedProblems").doc(n.id).get()}))).pipe(ce.hs).pipe((0,oe.U)((function(e){return e.problems?e:pe(pe({},e),{},{problems:[]})}))).pipe((0,ae.B)()),r=new p.x,i=r.pipe((0,oe.U)((function(e){return e.problems}))),o=(0,ee.a)([t.pipe((0,oe.U)((function(e){return e.problems||[]}))),i]).pipe((0,oe.U)((function(n){var t=(0,a.Z)(n,2),r=t[0],i=t[1];if(!i)return[];if(!r)return ce.hi(10)(i);for(var o=(0,_.X$)(i,r),c=ce.hi(8)(o),u=ce.hi(2)(r),l=(0,_.X$)(o,c),d=(0,_.X$)(r,u),f=[].concat((0,s.Z)(c),(0,s.Z)(u));f.length<10;)if(l.length>0)f.push(l.splice(0,1)[0]);else{if(!(d.length>0))break;f.push(d.splice(0,1)[0])}return 0===l.length?(e.next(!0),e.complete()):(e.next(!1),e.complete()),f}))).pipe((0,oe.U)((function(e){return(0,_.TV)(e)}))).pipe((0,ae.B)()),c=o.pipe(ce.Zh).pipe(ce.Qg).pipe((0,oe.U)((function(e){return e.map((function(e){return e.options&&Array.isArray(e.options)?pe(pe({},e),{},{options:(0,_.TV)(e.options)}):e}))}))).pipe(ce.Az).pipe(ce.mF),u=new te.w0;return u.add(c.subscribe((function(e){N(e),R(!0)}))),u.add(o.subscribe((function(e){return v(e.length)}))),u.add(W.subscribe((function(e){return Z(!e)}))),u.add((0,ee.a)([r,t.pipe((0,oe.U)((function(e){return void 0===e.noMiss||null===e.noMiss||e.noMiss}))),o,W,P]).pipe((0,m.h)((function(e){var n=(0,a.Z)(e,5),t=(n[0],n[1],n[2],n[3]);n[4];return!!t}))).pipe((0,ie.P)()).subscribe((function(e){var n,t=(0,a.Z)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];ue.Z.firestore().collection("users").doc(c.uid).collection("finishedProblems").doc(r.id).set({topic:r._ref,problems:(n=ue.Z.firestore.FieldValue).arrayUnion.apply(n,(0,s.Z)(o)),noMiss:i&&U.current},{merge:!0})}))),u.add((0,ee.a)([r,W,e]).pipe((0,m.h)((function(e){var n=(0,a.Z)(e,3);n[0],n[1];return n[2]}))).subscribe((function(e){var n=(0,a.Z)(e,2),t=n[0],r=n[1];ue.Z.firestore().collection("users").doc(r.uid).set({finishedTopics:ue.Z.firestore.FieldValue.arrayUnion(t._ref)},{merge:!0})}))),u.add((0,ee.a)([r,W,k,e]).pipe((0,se.z)((function(e){var n=(0,a.Z)(e,4),t=n[0],r=n[1],i=n[2],o=n[3],c=[];return i.finishedTopics instanceof Array&&c.push.apply(c,(0,s.Z)(i.finishedTopics)),o&&!c.some((function(e){return e.isEqual(t._ref)}))&&c.push(t._ref),Promise.all(c.map((function(e){return ue.Z.firestore().collection("users").doc(r.uid).collection("finishedProblems").doc(e.id).get().then((function(n){return{ref:e,noMiss:null===n.data()||n.data().noMiss}}))})))}))).subscribe(q)),u.add((0,re.Dp)(n.get()).pipe(ce.hs).subscribe(r)),function(){u.unsubscribe()}}),[q,P,W,k,n]);var M=(0,d.useRef)(null),D=(0,d.useState)(null),I=D[0],z=D[1],F=(0,d.useMemo)((function(){return new ne.t(1)}),[]);(0,d.useEffect)((function(){A&&0===b&&(M.current=Date.now())}),[A,b]);var Y=(0,d.useMemo)((function(){return new p.x}),[]);(0,d.useEffect)((function(){var e=new te.w0;return e.add(P.subscribe((function(){if(Y.next(!0),Y.complete(),null!=M.current){var e=(Date.now()-M.current)/1e3;z(e),F.next(e),F.complete()}}))),function(){e.unsubscribe()}}),[P,Y,F]),function(e,n,t,r,i,s){(0,d.useEffect)((function(){var o=(0,ee.a)([e,n,t,r,i]).pipe((0,m.h)((function(e){var n=(0,a.Z)(e,3),t=n[0],r=(n[1],n[2]);return!!t&&t.length>0||!!r}))).subscribe((function(e){var n,t,r=(0,a.Z)(e,5),i=r[0],o=r[1],c=r[2],u=r[3],l=r[4],d={clearTime:c,noMiss:s.current,finishedTopics:l,sessionFinish:o,login:!!u},f=[];i.forEach((function(e){e.check(d)&&f.push(e._ref)})),u&&ue.Z.firestore().collection("users").doc(u.uid).set({finishedTropies:(n=ue.Z.firestore.FieldValue).arrayUnion.apply(n,f),queuedTropyNotifications:(t=ue.Z.firestore.FieldValue).arrayUnion.apply(t,f)},{merge:!0})}));return function(){o.unsubscribe()}}),[s,i,e,n,t,r])}((0,le.Fd)(k),Y,F,W,q,U);var L=(0,d.useState)(!1),B=L[0],V=L[1],X=(0,d.useState)(null),Q=X[0],$=X[1];return(0,d.useEffect)((function(){var e=new te.w0;return e.add((0,ee.a)([F,k.pipe((0,oe.U)((function(e){return e.bestTime}))),W.pipe((0,oe.U)((function(e){return null===e||void 0===e?void 0:e.uid})))]).pipe((0,m.h)((function(e){var n=(0,a.Z)(e,3);n[0],n[1];return!!n[2]}))).subscribe((function(e){var t=(0,a.Z)(e,3),r=t[0],i=t[1],s=t[2];!i||!i[n.id]||r<i[n.id]?(V(!0),$(r),ue.Z.firestore().collection("users").doc(s).set({bestTime:(0,o.Z)({},n.id,r)},{merge:!0})):i&&i[n.id]&&$(i[n.id])}))),function(){e.unsubscribe()}}),[F,W,k,n.id]),(0,i.jsxs)("div",{className:"app-container",children:[(0,i.jsx)(u.default,{children:(0,i.jsx)("title",{children:"Quiz"})}),(0,i.jsxs)("nav",{className:"session progressNav",children:[(0,i.jsx)("div",{style:{opacity:A?1:0},className:"progressBar",children:(0,i.jsx)("div",{style:{width:100*w+"%"},className:"progress"})}),(0,i.jsx)("div",{className:"cross",children:(0,i.jsx)(c.default,{href:"/",children:(0,i.jsx)("a",{children:(0,i.jsx)(l.aM,{})})})})]}),O?(0,i.jsx)(f.Z,{}):A?b===S.length?(0,i.jsx)(J,{totalTime:I,bestTime:Q,bestTimeUpdated:B}):(0,i.jsx)(G,{challenge:S[b],language:t,isLastQuestion:b===h-1,onCorrect:function(){y((function(e){return e+1/h}))},onNext:function(e){e||(U.current=!1),e?x((function(e){return e+1})):N((function(e){var n=e.splice(b,1);return[].concat((0,s.Z)(e),(0,s.Z)(n))}))}}):(0,i.jsx)(K,{})]})}},850:function(e){e.exports={outterSpan:"AutoSizeButton_outterSpan__2tvsU",innerSpan:"AutoSizeButton_innerSpan__2Gky6"}}}]);