(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{4699:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var t=r(2961);function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],t=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done)&&(r.push(a.value),!n||r.length!==n);t=!0);}catch(c){i=!0,o=c}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,n)||(0,t.Z)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},6257:function(e,n,r){"use strict";r(8483)},6612:function(e,n,r){"use strict";r.d(n,{U:function(){return t}});var t={en:{nav_home:"Home",nav_trophies:"Trophies",user_change_avatar:"Change Avatar",user_login:"Login",user_logout:"Logout"},jp:{nav_home:"\u30db\u30fc\u30e0",nav_trophies:"\u30c8\u30ed\u30d5\u30a3\u30fc",user_change_avatar:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4",user_login:"\u30ed\u30b0\u30a4\u30f3",user_logout:"\u30ed\u30b0\u30a2\u30a6\u30c8"}}},5011:function(e,n,r){"use strict";r.d(n,{Z:function(){return j}});var t=r(5893),i=r(1664),o=r(7922),a=(r(3404),r(6690),r(3006)),s=r(7294),c=r(6156),l=r(6503),u=r.n(l),d=r(1389),f=r(3062);function h(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?h(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var g=o.Z.storage().ref();function p(e){var n=e.shown,r=e.onSave,i=e.onClose,o=(e.language,(0,s.useState)(null)),c=o[0],l=o[1],h=(0,s.useCallback)((function(e){l(e[0])}),[]),p=(0,d.u)({onDrop:h}),_=p.getRootProps,x=p.getInputProps,m=p.isDragActive,j=(0,s.useState)(void 0),y=j[0],b=j[1];(0,s.useEffect)((function(){b(c?URL.createObjectURL(c):void 0)}),[c]);var N=(0,s.useState)(!1),w=N[0],O=N[1],k=(0,s.useState)(!1),D=k[0],S=k[1];(0,s.useEffect)((function(){n?(O(!0),S(!0)):(S(!1),setTimeout((function(){O(!1)}),250))}),[n]);var T=(0,s.useState)(!1),A=T[0],C=T[1],U=(0,f.BF)(),E=(0,s.useState)(null),P=E[0],B=E[1];return(0,s.useEffect)((function(){U.subscribe((function(e){B(e?e.uid:null)}))}),[U]),(0,t.jsx)("div",{className:"overlay-layout",style:{opacity:D?1:0,display:w?"flex":"none",transition:"250ms",justifyContent:"center",alignItems:"center"},children:(0,t.jsxs)("div",{className:u().box,children:[(0,t.jsxs)("div",{className:u().head,children:[(0,t.jsx)("div",{className:u().title,children:"Change Icon"}),(0,t.jsx)("div",{className:u().close,onClick:function(e){l(null),i()},children:(0,t.jsx)(a.aM,{})})]}),(0,t.jsx)("div",{className:u().content,children:(0,t.jsxs)("div",v(v({},_()),{},{className:u().imageDrag+" "+(m?u().dragging:""),children:[(0,t.jsx)("input",v({},x())),m?(0,t.jsx)("div",{children:"Drop the files here..."}):y?(0,t.jsx)("div",{className:"w-full h-full rounded-full",style:{background:"url(".concat(y,") 0% 0% / cover")}}):(0,t.jsx)("div",{children:"Drag and drop some files here, or click to select files."}),A?(0,t.jsx)("div",{className:u()["loading-overlay"],children:(0,t.jsx)("div",{className:u().icon,children:(0,t.jsx)(a.Ho,{})})}):null]}))}),(0,t.jsxs)("div",{className:u().foot,children:[(0,t.jsx)("div",{className:u().primary,children:(0,t.jsx)("button",{disabled:!c||A,onClick:function(e){C(!0),g.child("UserAvatar/"+P).put(c).then((function(){C(!1),l(null),r()})).catch((function(e){C(!1)}))},children:"Save"})}),(0,t.jsx)("div",{className:u().secondary})]})]})})}var _=r(6612),x=o.Z.storage().ref();function m(e){var n=e.link,r=e.icon,o=e.title;return(0,t.jsx)("div",{className:"item",children:(0,t.jsx)(i.default,{href:n||"",children:(0,t.jsxs)("a",{children:[r||null,(0,t.jsx)("span",{children:o})]})})})}function j(e){var n=e.language,r=(0,f.NF)(),i=r.userLoaded,c=r.user,l=(0,s.useState)(!1),u=l[0],d=l[1],h=(0,s.useCallback)((function(){d((function(e){return!e}))}),[]),v=(0,s.useState)(!1),g=v[0],j=v[1],y=(0,s.useState)(null),b=y[0],N=y[1];(0,s.useEffect)((function(){N(null),c&&x.child("UserAvatar/"+c.uid).getDownloadURL().catch((function(e){return x.child("UserAvatar/default_male.png").getDownloadURL()})).then((function(e){N(e)}))}),[c,u]);var w=(0,s.useMemo)((function(){return _.U[n]}),[n]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("nav",{className:"homeNav",children:(0,t.jsxs)("div",{className:"session",children:[(0,t.jsx)(m,{title:w.nav_home,icon:(0,t.jsx)(a.tv,{}),link:"/"}),(0,t.jsx)(m,{title:w.nav_trophies,icon:(0,t.jsx)(a.KW,{}),link:"/trophies"}),(0,t.jsx)("div",{className:"item",style:{paddingTop:"1.5rem",paddingBottom:"1.5rem"},children:!i||c&&!b?(0,t.jsx)("div",{className:"group relative flex items-center",children:(0,t.jsx)("div",{className:"w-16 h-16 rounded-full",children:(0,t.jsx)(a.Ho,{style:{width:"100%"}})})}):c?(0,t.jsxs)("div",{className:"group relative flex items-center",children:[(0,t.jsx)("div",{style:{backgroundImage:"url(".concat(b,")"),backgroundColor:"rgba(var(--color-text-rgb), 0.25)",backgroundSize:"cover"},className:"w-12 h-12 rounded-full"}),(0,t.jsxs)("div",{style:{top:"100%",right:-10,marginTop:-10,background:"#fff",whiteSpace:"nowrap"},className:"group-hover:block absolute shadow-xl rounded-2xl hidden text-center",children:[(0,t.jsx)("div",{className:"px-8 py-3 hover:bg-gray-100 active:bg-gray-200 rounded-t-2xl",onClick:function(e){j(!0)},children:w.user_change_avatar}),(0,t.jsx)("div",{className:"px-8 py-3 hover:bg-gray-100 active:bg-gray-200 rounded-b-2xl",onClick:function(e){o.Z.auth().signOut()},children:w.user_logout})]})]}):(0,t.jsx)(m,{title:w.user_login,link:"/login"})})]})}),(0,t.jsx)("div",{className:"overlay-container",children:(0,t.jsx)(p,{shown:g,onSave:function(){j(!1),h()},onClose:function(){j(!1)},language:n})})]})}},8610:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return h}});var t=r(5893),i=r(9008),o=r(4698),a=r.n(o),s=r(3006),c=r(5011),l=r(7294),u=r(8251),d=r(3062),f={en:{trophies_list_title:"Trophies"},jp:{trophies_list_title:"\u30c8\u30ed\u30d5\u30a3\u30fc\u4e00\u89a7"}};function h(e){var n=(0,l.useState)(null),r=n[0],o=n[1],h=(0,d.BF)(),v=(0,d.pV)(h),g=(0,u.Fr)(v);(0,l.useEffect)((function(){g.subscribe((function(e){o(e)}))}),[g]);var p=(0,l.useMemo)((function(){return f[e.language]}),[e.language]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"home-container",children:[(0,t.jsx)(i.default,{children:(0,t.jsx)("title",{children:"Trophies"})}),(0,t.jsx)(c.Z,{language:e.language}),(0,t.jsx)("div",{className:"tropies-container session",children:(0,t.jsxs)("div",{className:"tropies-box",children:[(0,t.jsx)("div",{className:"title",children:p.trophies_list_title}),(0,t.jsx)("div",{className:"tropies",children:r?r.map((function(e){return(0,t.jsxs)("div",{className:"item",children:[(0,t.jsx)("div",{className:"icon ".concat(e.achived?a()[e.color]:a().hidden," ").concat(a().trophy),children:(0,t.jsx)(s.rm,{})}),(0,t.jsxs)("div",{className:"details",children:[(0,t.jsx)("div",{className:"name",children:e.achived?e.name:"\uff1f\uff1f\uff1f\uff08\uff1f\uff1f\uff1f\uff09"}),(0,t.jsx)("div",{className:"description",children:e.description})]})]},e._ref.id)})):(0,t.jsx)("div",{className:"loading",children:(0,t.jsx)(s.Ho,{})})})]})})]})})}},3446:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trophies",function(){return r(8610)}])},6503:function(e){e.exports={box:"DialogBox_box__S_UC-",head:"DialogBox_head__1NaSO",foot:"DialogBox_foot__FU4gZ",content:"DialogBox_content__3pSSD",title:"DialogBox_title__2uUJU",close:"DialogBox_close__1VdlZ",imageDrag:"DialogBox_imageDrag__UuMVk","loading-overlay":"DialogBox_loading-overlay__1TVoX",icon:"DialogBox_icon__1fEww",dragging:"DialogBox_dragging__21nYg"}},4698:function(e){e.exports={ruby:"Trophy_ruby__1Gvag",trophy:"Trophy_trophy__3Vv97",diamond:"Trophy_diamond__A9ASF",gold:"Trophy_gold__1v1j1",silver:"Trophy_silver__2xcgp",bronze:"Trophy_bronze__FuJwY",hidden:"Trophy_hidden__2AVPA"}},2334:function(e,n,r){"use strict";r.d(n,{a:function(){return g}});var t=r(1480),i=Array.isArray,o=Object.getPrototypeOf,a=Object.prototype,s=Object.keys;function c(e){if(1===e.length){var n=e[0];if(i(n))return{args:n,keys:null};if((t=n)&&"object"===typeof t&&o(t)===a){var r=s(n);return{args:r.map((function(e){return n[e]})),keys:r}}}var t;return{args:e,keys:null}}var l=r(2303),u=r(278),d=r(3211),f=r(7617);function h(e,n){return e.reduce((function(e,r,t){return e[r]=n[t],e}),{})}var v=r(2566);function g(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(0,f.yG)(e),i=(0,f.jO)(e),o=c(e),a=o.args,s=o.keys;if(0===a.length)return(0,l.Dp)([],r);var v=new t.y(p(a,r,s?function(e){return h(s,e)}:u.y));return i?v.pipe((0,d.Z)(i)):v}function p(e,n,r){return void 0===r&&(r=u.y),function(t){_(n,(function(){for(var i=e.length,o=new Array(i),a=i,s=i,c=function(i){_(n,(function(){var c=(0,l.Dp)(e[i],n),u=!1;c.subscribe(new v.Q(t,(function(e){o[i]=e,u||(u=!0,s--),s||t.next(r(o.slice()))}),(function(){--a||t.complete()})))}),t)},u=0;u<i;u++)c(u)}),t)}}function _(e,n,r){e?r.add(e.schedule(n)):n()}},7617:function(e,n,r){"use strict";r.d(n,{_6:function(){return s},jO:function(){return o},yG:function(){return a}});var t=r(8474);function i(e){return e[e.length-1]}function o(e){return(0,t.m)(i(e))?e.pop():void 0}function a(e){return(n=i(e))&&(0,t.m)(n.schedule)?e.pop():void 0;var n}function s(e,n){return"number"===typeof i(e)?e.pop():n}},3211:function(e,n,r){"use strict";r.d(n,{Z:function(){return a}});var t=r(5987),i=r(9127),o=Array.isArray;function a(e){return(0,i.U)((function(n){return function(e,n){return o(n)?e.apply(void 0,(0,t.ev)([],(0,t.CR)(n))):e(n)}(e,n)}))}}},function(e){e.O(0,[774,828,834,724,944,424,943,389,175,888,179],(function(){return n=3446,e(e.s=n);var n}));var n=e.O();_N_E=n}]);