(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{6612:function(e,n,t){"use strict";t.d(n,{U:function(){return r}});var r={en:{nav_home:"Home",nav_trophies:"Trophies",user_change_avatar:"Change Avatar",user_login:"Login",user_logout:"Logout"},jp:{nav_home:"\u30db\u30fc\u30e0",nav_trophies:"\u30c8\u30ed\u30d5\u30a3\u30fc",user_change_avatar:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4",user_login:"\u30ed\u30b0\u30a4\u30f3",user_logout:"\u30ed\u30b0\u30a2\u30a6\u30c8"}}},8251:function(e,n,t){"use strict";t.d(n,{S:function(){return g}});var r=t(7922),o=(t(6257),t(7294)),i=t(6716),s=t(5720),a=t(2303),c=t(2407),l=t(1361),u=t(9127),d=r.Z.firestore();function g(){var e=(0,o.useMemo)((function(){return new i.x}),[]);return(0,o.useEffect)((function(){var n=new s.w0,t={ruby:1,diamond:2,gold:3,silver:4,bronze:5};return n.add((0,a.Dp)(d.collection("trophies").get()).pipe(c._M).pipe(l.Q).pipe((0,u.U)((function(e){return e.sort((function(e,n){return t[e.color]-t[n.color]}))}))).subscribe(e)),function(){n.unsubscribe()}}),[e]),e}},5011:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var r=t(5893),o=t(1664),i=t(7922),s=(t(3404),t(6690),t(3006)),a=t(7839),c=t(7294),l=t(6156),u=t(6503),d=t.n(u),g=t(1389);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=i.Z.storage().ref();function x(e){var n=e.shown,t=e.onSave,o=e.onClose,i=(e.language,(0,c.useState)(null)),l=i[0],u=i[1],f=(0,c.useCallback)((function(e){u(e[0])}),[]),x=(0,g.u)({onDrop:f}),p=x.getRootProps,j=x.getInputProps,_=x.isDragActive,m=(0,c.useState)(void 0),b=m[0],N=m[1];(0,c.useEffect)((function(){N(l?URL.createObjectURL(l):void 0)}),[l]);var y=(0,c.useState)(!1),w=y[0],D=y[1],k=(0,c.useState)(!1),S=k[0],O=k[1];(0,c.useEffect)((function(){n?(D(!0),O(!0)):(O(!1),setTimeout((function(){D(!1)}),250))}),[n]);var C=(0,c.useState)(!1),U=C[0],E=C[1],P=(0,a.BF)(),B=(0,c.useState)(null),Z=B[0],T=B[1];return(0,c.useEffect)((function(){P.subscribe((function(e){T(e?e.uid:null)}))}),[P]),(0,r.jsx)("div",{className:"overlay-layout",style:{opacity:S?1:0,display:w?"flex":"none",transition:"250ms",justifyContent:"center",alignItems:"center"},children:(0,r.jsxs)("div",{className:d().box,children:[(0,r.jsxs)("div",{className:d().head,children:[(0,r.jsx)("div",{className:d().title,children:"Change Icon"}),(0,r.jsx)("div",{className:d().close,onClick:function(e){u(null),o()},children:(0,r.jsx)(s.aM,{})})]}),(0,r.jsx)("div",{className:d().content,children:(0,r.jsxs)("div",h(h({},p()),{},{className:d().imageDrag+" "+(_?d().dragging:""),children:[(0,r.jsx)("input",h({},j())),_?(0,r.jsx)("div",{children:"Drop the files here..."}):b?(0,r.jsx)("div",{className:"w-full h-full rounded-full",style:{background:"url(".concat(b,") 0% 0% / cover")}}):(0,r.jsx)("div",{children:"Drag and drop some files here, or click to select files."}),U?(0,r.jsx)("div",{className:d()["loading-overlay"],children:(0,r.jsx)("div",{className:d().icon,children:(0,r.jsx)(s.Ho,{})})}):null]}))}),(0,r.jsxs)("div",{className:d().foot,children:[(0,r.jsx)("div",{className:d().primary,children:(0,r.jsx)("button",{disabled:!l||U,onClick:function(e){E(!0),v.child("UserAvatar/"+Z).put(l).then((function(){E(!1),u(null),t()})).catch((function(e){E(!1)}))},children:"Save"})}),(0,r.jsx)("div",{className:d().secondary})]})]})})}var p=t(6612),j=i.Z.storage().ref();function _(e){var n=e.link,t=e.icon,i=e.title;return(0,r.jsx)("div",{className:"item",children:(0,r.jsx)(o.default,{href:n||"",children:(0,r.jsxs)("a",{children:[t||null,(0,r.jsx)("span",{children:i})]})})})}function m(e){var n=e.language,t=(0,a.NF)(),o=t.userLoaded,l=t.user,u=(0,c.useState)(!1),d=u[0],g=u[1],f=(0,c.useCallback)((function(){g((function(e){return!e}))}),[]),h=(0,c.useState)(!1),v=h[0],m=h[1],b=(0,c.useState)(null),N=b[0],y=b[1];(0,c.useEffect)((function(){y(null),l&&j.child("UserAvatar/"+l.uid).getDownloadURL().catch((function(e){return j.child("UserAvatar/default_male.png").getDownloadURL()})).then((function(e){y(e)}))}),[l,d]);var w=(0,c.useMemo)((function(){return p.U[n]}),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:"homeNav",children:(0,r.jsxs)("div",{className:"session",children:[(0,r.jsx)(_,{title:w.nav_home,icon:(0,r.jsx)(s.tv,{}),link:"/"}),(0,r.jsx)(_,{title:w.nav_trophies,icon:(0,r.jsx)(s.KW,{}),link:"/trophies"}),(0,r.jsx)("div",{className:"item",style:{paddingTop:"1.5rem",paddingBottom:"1.5rem"},children:!o||l&&!N?(0,r.jsx)("div",{className:"group relative flex items-center",children:(0,r.jsx)("div",{className:"w-16 h-16 rounded-full",children:(0,r.jsx)(s.Ho,{style:{width:"100%"}})})}):l?(0,r.jsxs)("div",{className:"group relative flex items-center",children:[(0,r.jsx)("div",{style:{backgroundImage:"url(".concat(N,")"),backgroundColor:"rgba(var(--color-text-rgb), 0.25)",backgroundSize:"cover"},className:"w-12 h-12 rounded-full"}),(0,r.jsxs)("div",{style:{top:"100%",right:-10,marginTop:-10,background:"#fff",whiteSpace:"nowrap"},className:"group-hover:block absolute shadow-xl rounded-2xl hidden text-center",children:[(0,r.jsx)("div",{className:"px-8 py-3 hover:bg-gray-100 active:bg-gray-200 rounded-t-2xl",onClick:function(e){m(!0)},children:w.user_change_avatar}),(0,r.jsx)("div",{className:"px-8 py-3 hover:bg-gray-100 active:bg-gray-200 rounded-b-2xl",onClick:function(e){i.Z.auth().signOut()},children:w.user_logout})]})]}):(0,r.jsx)(_,{title:w.user_login,link:"/login"})})]})}),(0,r.jsx)("div",{className:"overlay-container",children:(0,r.jsx)(x,{shown:v,onSave:function(){m(!1),f()},onClose:function(){m(!1)},language:n})})]})}},7307:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var r=t(5893),o=t(9008),i=t(5011),s=t(8251),a=t(7294);function c(e){var n=(0,s.S)(),t=(0,a.useState)([]),c=(t[0],t[1]);return(0,a.useEffect)((function(){n.subscribe((function(e){c(e)}))}),[n]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"home-container",children:[(0,r.jsx)(o.default,{children:(0,r.jsx)("title",{children:"Trophies"})}),(0,r.jsx)(i.Z,{language:e.language}),(0,r.jsx)("div",{className:"tropies-container session",children:(0,r.jsxs)("div",{className:"tropies",children:["\u958b\u767a\u9014\u4e2d\u3067\u3059\uff01\u3082\u3046\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\uff01",(0,r.jsx)("br",{}),"Development in progress. Please wait for a while."]})})]})})}},3446:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trophies",function(){return t(7307)}])},6503:function(e){e.exports={box:"DialogBox_box__S_UC-",head:"DialogBox_head__1NaSO",foot:"DialogBox_foot__FU4gZ",content:"DialogBox_content__3pSSD",title:"DialogBox_title__2uUJU",close:"DialogBox_close__1VdlZ",imageDrag:"DialogBox_imageDrag__UuMVk","loading-overlay":"DialogBox_loading-overlay__1TVoX",icon:"DialogBox_icon__1fEww",dragging:"DialogBox_dragging__21nYg"}}},function(e){e.O(0,[774,828,834,724,237,757,88,389,58,888,179],(function(){return n=3446,e(e.s=n);var n}));var n=e.O();_N_E=n}]);