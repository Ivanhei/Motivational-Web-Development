(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{4285:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return p}});var t=n(5893),o=n(6156),i=n(18),c=n(7922),a=(n(3759),n(7294));function l(e,r){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"===typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e))||r&&e&&"number"===typeof e.length){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){a=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var d=c.Z.firestore();function p(){var e=(0,a.useState)([]),r=e[0],n=e[1],o=(0,a.useState)([]),u=o[0],s=o[1],p=(0,a.useMemo)((function(){for(var e=(0,i.Z)(r),n=0;n<e.length;n++)if(e[n]._belongTopic=-1,e[n].topic)for(var t=0;t<u.length;t++)e[n].topic.isEqual(u[t]._ref)&&(e[n]._belongTopic=t);return e}),[r,u]);function h(e){return function(r){var n=parseInt(r.target.value);n>=0&&n<u.length&&Promise.all([e.topic.update({problems:c.Z.firestore.FieldValue.arrayRemove(e._ref)}),u[n]._ref.update({problems:c.Z.firestore.FieldValue.arrayUnion(e._ref)}),e._ref.update({topic:u[n]._ref})]).then((function(){console.log("Done Updating!!")})).catch((function(){console.error("Error occurred during update.")}))}}return(0,a.useEffect)((function(){var e=[d.collection("problems").onSnapshot((function(e){n(e.docs.map((function(e){return f(f({},e.data()),{},{id:e.id,_ref:e.ref})})))})),d.collection("topic").onSnapshot((function(e){s(e.docs.map((function(e){return f(f({},e.data()),{},{id:e.id,_ref:e.ref})})))}))];return function(){var r,n=l(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)()}}catch(t){n.e(t)}finally{n.f()}}}),[]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Problems Details"}),(0,t.jsxs)("table",{className:"border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Document ID"}),(0,t.jsx)("th",{children:"Details"}),(0,t.jsx)("th",{children:"Topic"})]})}),(0,t.jsx)("tbody",{children:p.map((function(e,r){var n="";for(var o in e)n+="".concat(o,": ").concat(e[o],"\n");return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border",children:e.id}),(0,t.jsx)("td",{className:"border",children:(0,t.jsx)("pre",{children:n})}),(0,t.jsx)("td",{className:"border",children:(0,t.jsxs)("select",{name:"problem_".concat(e.id,"_topic"),onChange:h(e),value:e._belongTopic,children:[-1===e._belongTopic?(0,t.jsx)("option",{value:-1,children:"(not selected)"},-1):null,u.map((function(e,r){return(0,t.jsx)("option",{value:r,children:e.name},r)}))]})})]},e.id)}))})]})]})}},3028:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/problems_table",function(){return n(4285)}])}},function(e){e.O(0,[828,158,774,888,179],(function(){return r=3028,e(e.s=r);var r}));var r=e.O();_N_E=r}]);