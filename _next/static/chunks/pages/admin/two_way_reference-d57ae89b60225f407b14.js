(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{3804:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var t=n(5893),o=n(6156),c=n(18),i=n(7922),a=(n(3759),n(7294));function u(r,e){var n;if("undefined"===typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,e){if(!r)return;if("string"===typeof r)return f(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(r,e)}(r))||e&&r&&"number"===typeof r.length){n&&(r=n);var t=0,o=function(){};return{s:o,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,a=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return i=r.done,r},e:function(r){a=!0,c=r},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw c}}}}function f(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function l(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.push.apply(n,t)}return n}function s(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,o.Z)(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}var d=i.Z.firestore();function p(){var r=(0,a.useState)([]),e=r[0],n=r[1],o=(0,a.useState)([]),i=o[0],f=o[1],l=(0,a.useMemo)((function(){for(var r=(0,c.Z)(e),n=0;n<r.length;n++){r[n]._belongTopic=-1;for(var t=0;t<i.length;t++)for(var o=i[t].problems,a=0;a<o.length;a++)o[a].isEqual(r[n]._ref)&&(r[n]._belongTopic=t)}return r}),[e,i]);function p(r){var e=r._belongTopic;-1!==e&&r._ref.update({topic:i[e]._ref})}return(0,a.useEffect)((function(){var r=[d.collection("problems").onSnapshot((function(r){n(r.docs.map((function(r){return s(s({},r.data()),{},{id:r.id,_ref:r.ref})})))})),d.collection("topic").onSnapshot((function(r){f(r.docs.map((function(r){return s(s({},r.data()),{},{id:r.id,_ref:r.ref})})))}))];return function(){var e,n=u(r);try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(t){n.e(t)}finally{n.f()}}}),[]),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{onClick:function(){var r,e=u(l);try{for(e.s();!(r=e.n()).done;){p(r.value)}}catch(n){e.e(n)}finally{e.f()}},children:"Update problems"}),(0,t.jsx)("h1",{children:"Problems Details"}),(0,t.jsxs)("table",{className:"border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Document ID"}),(0,t.jsx)("th",{children:"Details"})]})}),(0,t.jsx)("tbody",{children:l.map((function(r,e){var n="";for(var o in r)n+="".concat(o,": ").concat(r[o],"\n");return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border",children:r.id}),(0,t.jsx)("td",{className:"border",children:(0,t.jsx)("pre",{children:n})})]},r.id)}))})]})]})}},5827:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/two_way_reference",function(){return n(3804)}])}},function(r){r.O(0,[828,158,774,888,179],(function(){return e=5827,r(r.s=e);var e}));var e=r.O();_N_E=e}]);